{% extends "base.html" %}

{% block content %}
<div class="container mx-auto p-4">
    <h1 class="text-3xl font-bold mb-4">
        Diccionario de Tags para: <span class="font-normal">{{ project.title }}</span>
    </h1>

    {% if not is_list_public %}
        <div class="alert alert-warning">
            <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>
            <span>
                La lista de tags no está visible. El Owner del proyecto aún no ha 
                vinculado todas las Preguntas de Investigación a un tag.
            </span>
        </div>
    {% else %}
        <div class="overflow-x-auto">
            <table class="table w-full">
                <thead>
                    <tr>
                        <th>Tag</th>
                        <th>Justificación</th>
                        <th>PI Vinculada</th>
                        <th>Obligatorio</th>
                    </tr>
                </thead>
                <tbody>
                    {% for tag in tags %}
                    <tr>
                        <td>
                            <span class="badge" style="background-color:{{ tag.color|default:'#e0e0e0' }};">
                                {{ tag.name }}
                            </span>
                        </td>
                        <td>{{ tag.justification|default:"N/A" }}</td>
                        <td>{{ tag.question.text|truncatechars:50|default:"N/A (Inductivo)" }}</td>
                        <td>
                            {% if tag.is_mandatory %}
                                <span class="badge badge-error">Sí</span>
                            {% else %}
                                <span class="badge badge-ghost">No</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="4">El Owner aún no ha creado tags públicos para este proyecto.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% endif %}
</div>
{% endblock %}